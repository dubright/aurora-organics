<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aurora Organics 🌿</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Inter", sans-serif;
      background: radial-gradient(circle at top left, #0b0f0d, #0f1115 70%);
      color: #E6E6E6;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }

    /* Sidebar esquerda */
    .sidebar {
      width: 220px;
      background: #121518;
      padding: 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      border-right: 1px solid #1E2228;
    }
    .logo {
      font-size: 1.1rem;
      font-weight: 700;
      color: #00E676;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .nav {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }
    .nav button {
      background: none;
      color: #E6E6E6;
      border: none;
      text-align: left;
      padding: 0.6rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .nav button:hover,
    .nav button.active {
      background: #00E67622;
      color: #00E676;
    }

    /* Painel central */
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 1.5rem;
      overflow-y: auto;
      gap: 1rem;
    }

    h2 { margin: 0.5rem 0; font-size: 1.1rem; color: #00E676; }

    .card {
      background: #171A1F;
      border-radius: 12px;
      padding: 1rem 1.5rem;
      box-shadow: 0 4px 12px rgba(0, 230, 118, 0.05);
      transition: transform 0.3s ease;
    }
    .card:hover { transform: scale(1.01); }

    .flex-between { display: flex; justify-content: space-between; align-items: center; }
    .flex { display: flex; gap: 0.5rem; flex-wrap: wrap; }

    select, input, button {
      border: none;
      border-radius: 8px;
      padding: 0.6rem 0.8rem;
      font-family: inherit;
    }
    button {
      background: #00E676;
      color: #000;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover { transform: scale(1.03); box-shadow: 0 0 8px #00E67655; }

    /* Painel direito */
    .right {
      width: 280px;
      background: #121518;
      border-left: 1px solid #1E2228;
      padding: 1.5rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }

    .small-title {
      font-weight: 700;
      font-size: 0.9rem;
      color: #00E676;
      border-bottom: 1px solid #1E2228;
      padding-bottom: 0.3rem;
    }

    .progress-bar {
      height: 6px;
      background: #1E2228;
      border-radius: 4px;
      margin-top: 4px;
      overflow: hidden;
    }
    .progress-inner {
      height: 100%;
      transition: width 0.5s;
      background: linear-gradient(90deg, #00E676, #00C16A);
    }

    .mini {
      font-size: 0.85rem;
      color: #A1A1A1;
    }
    .stat {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      margin-bottom: 4px;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #00E676;
      color: #000;
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

  </style>
</head>

<body>
  <div class="sidebar">
    <div class="logo">🌿 Aurora Organics</div>
    <div class="nav">
      <button class="active">Dashboard</button>
      <button>Projetos</button>
      <button>Tarefas</button>
      <button>Insumos</button>
    </div>
  </div>

  <div class="main" id="root"></div>

  <div class="right" id="side"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const plantas = ["Tomate","Alface","Abobrinha","Cenoura","Morango","Rúcula"];
    const ferts = ["BioBizz","Forth","Dimy"];
    const fases = [
      { nome:"Germinação", cor:"#00FF99", icone:"🌱", inicio:0, fim:7 },
      { nome:"Crescimento", cor:"#00E676", icone:"🌿", inicio:8, fim:35 },
      { nome:"Floração", cor:"#C084FC", icone:"🌸", inicio:36, fim:50 },
      { nome:"Pré-colheita", cor:"#FCA311", icone:"🍅", inicio:51, fim:60 }
    ];

    function getFase(dias){
      return fases.find(f=>dias>=f.inicio && dias<=f.fim) || fases[0];
    }

    function App(){
      const [cultivos,setCultivos]=useState(JSON.parse(localStorage.getItem("cultivos")||"[]"));
      const [planta,setPlanta]=useState("");
      const [data,setData]=useState("");
      const [fert,setFert]=useState("BioBizz");
      const [local,setLocal]=useState("");
      const [toast,setToast]=useState("");

      useEffect(()=>localStorage.setItem("cultivos",JSON.stringify(cultivos)),[cultivos]);

      function addCultivo(){
        if(!planta||!data) return alert("Preencha todos os campos!");
        const germ=new Date(data);
        const colh=new Date(germ); colh.setDate(germ.getDate()+60);
        const novo={id:Date.now(),planta,data,fert,local,criado:new Date().toLocaleDateString()};
        setCultivos([...cultivos,novo]);
        setPlanta("");setData("");setLocal("");
        setToast("🌿 Cultivo adicionado com sucesso!");
        setTimeout(()=>setToast(""),3000);
      }

      function excluir(id){setCultivos(cultivos.filter(c=>c.id!==id))}

      function diasDesde(germ){
        return Math.floor((new Date()-new Date(germ))/(1000*60*60*24));
      }

      return(
        <div>
          <h2>🌾 Cadastro de Cultivos</h2>
          <div className="flex">
            <select value={planta} onChange={e=>setPlanta(e.target.value)}>
              <option value="">Selecione a planta</option>
              {plantas.map((p,i)=><option key={i}>{p}</option>)}
            </select>
            <input type="date" value={data} onChange={e=>setData(e.target.value)} />
            <select value={fert} onChange={e=>setFert(e.target.value)}>
              {ferts.map(f=><option key={f}>{f}</option>)}
            </select>
            <input placeholder="Litragem (ex: 5L)" value={local} onChange={e=>setLocal(e.target.value)} />
            <button onClick={addCultivo}>Adicionar</button>
          </div>

          <h2>🌱 Cultivos Ativos</h2>
          {cultivos.map(c=>{
            const dias=diasDesde(c.data);
            const fase=getFase(dias);
            const progresso=Math.min((dias/60)*100,100);
            return(
              <div key={c.id} className="card">
                <div className="flex-between">
                  <strong>{c.planta}</strong>
                  <span style={{color:fase.cor}}>{fase.icone} {fase.nome}</span>
                </div>
                <div className="mini">
                  Germinação: {new Date(c.data).toLocaleDateString('pt-BR',{day:'2-digit',month:'short'})} |
                  Colheita prevista: {new Date(new Date(c.data).setDate(new Date(c.data).getDate()+60)).toLocaleDateString('pt-BR',{day:'2-digit',month:'short'})}
                </div>
                <div className="progress-bar">
                  <div className="progress-inner" style={{width:`${progresso}%`,background:fase.cor}}></div>
                </div>
                <div className="mini">Fertilizante: {c.fert} | Vaso: {c.local||"-"}</div>
                <button style={{marginTop:"0.5rem"}} onClick={()=>excluir(c.id)}>Excluir</button>
              </div>
            )
          })}
          {toast && <div className="toast">{toast}</div>}
        </div>
      )
    }

    function SidePanel({ cultivos }){
      const total=cultivos.length;
      const progresso=Math.round(cultivos.reduce((a,c)=>{
        const d=Math.min((new Date()-new Date(c.data))/(1000*60*60*24*60)*100,100);
        return a+d;
      },0)/(total||1));

      return(
        <div>
          <div className="small-title">📊 Panorama Geral</div>
          <div className="stat"><span>Projetos:</span><span>1</span></div>
          <div className="stat"><span>Cultivos:</span><span>{total}</span></div>
          <div className="progress-bar"><div className="progress-inner" style={{width:`${progresso}%`}}></div></div>

          <div className="small-title" style={{marginTop:"1rem"}}>📈 Produtividade</div>
          <div className="stat"><span>Progresso médio</span><span>{progresso}%</span></div>
          <div className="progress-bar"><div className="progress-inner" style={{width:`${progresso}%`}}></div></div>

          <div className="small-title" style={{marginTop:"1rem"}}>💰 Painel Econômico</div>
          <div className="stat"><span>Custo total</span><span>R$ {(total*5).toFixed(2)}</span></div>
          <div className="stat"><span>Produção estimada</span><span>{(total*1.5).toFixed(1)} kg</span></div>
        </div>
      )
    }

    const root=ReactDOM.createRoot(document.getElementById("root"));
    const side=ReactDOM.createRoot(document.getElementById("side"));
    function Render(){
      const [data,setData]=React.useState(JSON.parse(localStorage.getItem("cultivos")||"[]"));
      React.useEffect(()=>{
        const listener=()=>setData(JSON.parse(localStorage.getItem("cultivos")||"[]"));
        window.addEventListener("storage",listener);
        return()=>window.removeEventListener("storage",listener);
      },[]);
      return <SidePanel cultivos={data}/>
    }
    root.render(<App/>);
    side.render(<Render/>);
  </script>
</body>
</html>
